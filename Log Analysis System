def log_analysis(file_path):
    ip_count = {}
    url_count = {}
    status_count = {}
    with open(file_path, "r") as f:
        for line in f:
            parts = line.strip().split()
            if len(parts) < 3:
                continue  # Skip malformed lines
            ip = parts[0]       # Assuming IP is first column
            url = parts[1]      # Assuming URL is second column
            status = parts[2]   # Assuming status code is third column
            ip_count[ip] = ip_count.get(ip, 0) + 1
            url_count[url] = url_count.get(url, 0) + 1
            status_count[status] = status_count.get(status, 0) + 1
    return {
        "Top IPs": sorted(ip_count.items(), key=lambda x: x[1], reverse=True)[:5],
        "Top URLs": sorted(url_count.items(), key=lambda x: x[1], reverse=True)[:5],
        "Response Codes": status_count
    }
# Example (log.txt contains lines like "192.168.1.1 /home 200")
result = log_analysis("log.txt")
print(result)
